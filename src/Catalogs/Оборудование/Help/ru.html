<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link><meta name="GENERATOR" content="MSHTML 11.00.9600.18125"></meta></head><body>
<p>Предназначено для хранения информации об оборудовании, управлением сбором счетчиков производительности.</p>
<p>Сбор счетчиков производительности может осуществлять одним из двух способов: PDH или java-приложением "Агент КИП".</p>
<h4>Общая схема получения данных</h4>
<p><img src="_files/2017-12-22_11h19_470.png"></img></p>
<h4>Способ PDH</h4>
<p>Сбор данных в данном случае возможен только в том случае, если фоновое задание "Сбор счетчиков производительности" выполняется на компьютере с ОС семейства Windows. Фоновое задание "Сбор счетчиков производительности" получает данные с помощью системной pdh.dll. Собранные данные раз в минуту агрегируются и записываются в регистр сведений "СтатистикаБуфер". Для каждой единицы оборудования запускается отдельное фоновое задание и выполняется в бесконечном цикле, т.е. не завершается. </p>
<h4>Способ "Агент КИП"</h4>
<p>Сбор данных осуществляется с помощью java-приложения "Агент КИП". Данное приложение может получать счетчики производительности как на компьютерах семейства ОС Windows, так и на компьютерах семейства ОС Linux. Собранные данные раз в минуту агрегируются, отправляются через http-сервис "AgentETP" в ИБ ЦКК и записываются в регистр сведений "СтатистикаБуфер". В случае отсутствия связи агент КИП имеет буфер для сохранения собранных данных, которые при первом же соединении с ЦКК будут отправлены. Размер буфера по умолчанию составляет 120 минут, т.е. 120 значений для каждого собираемого счетчика. Размером буфера можно управлять из ЦКК в справочнике "Агенты ЦКК".</p>
<h4>Обработка полученных данных</h4>
<p>Все собранные данные буферизируются в формате JSON в регистре сведений "СтатистикаБуфер". Для обработки этих данных предназначено фоновое задание "Обработка регистра сведений 'СтатистикаБуфер'". Данное фоновое задание выполняется в бесконечном цикле, т.е. не завершается. Обработка данных происходит в начале каждой минуты.</p>
<p> </p></body></html>